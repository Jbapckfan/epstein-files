<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epstein Files — Red Flag Deep Dive</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap');
:root{
  --bg:#08090d;--bg2:#0e1017;--bg3:#141620;--bg4:#1a1d2b;
  --text:#e8eaed;--text2:#9aa0b0;--text3:#6b7280;
  --red:#ff3b5c;--red-dark:#dc2626;--purple:#a855f7;--orange:#f59e0b;
  --blue:#60a5fa;--green:#22c55e;--gray:#4b5563;
  --border:rgba(255,255,255,0.06);
}
html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:var(--bg4) var(--bg)}
body{background:var(--bg);color:var(--text);font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;min-height:100vh}
body::-webkit-scrollbar{width:8px}
body::-webkit-scrollbar-track{background:var(--bg)}
body::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:4px}

.container{max-width:1200px;margin:0 auto;padding:40px 24px 80px}

/* Hero */
.hero{text-align:center;padding:80px 0 60px;position:relative}
.hero::after{content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:200px;height:1px;background:linear-gradient(90deg,transparent,var(--red),transparent)}
.hero h1{font-size:clamp(28px,4vw,42px);font-weight:900;letter-spacing:-0.5px;margin-bottom:12px;background:linear-gradient(135deg,#fff 0%,var(--red) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero .subtitle{font-size:clamp(13px,1.5vw,15px);color:var(--text2);max-width:800px;margin:0 auto;line-height:1.7}

/* Sections */
.section{margin-top:80px;opacity:0;transform:translateY(30px);transition:opacity 0.7s ease, transform 0.7s ease}
.section.visible{opacity:1;transform:translateY(0)}
.section-header{margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.section-header h2{font-size:clamp(20px,2.5vw,28px);font-weight:800;color:var(--text);margin-bottom:6px}
.section-header .section-num{font-size:12px;font-weight:700;color:var(--red);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
.section-header p{color:var(--text2);font-size:14px}

/* Legend */
.legend{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:24px;padding:12px 16px;background:var(--bg2);border-radius:8px;border:1px solid var(--border)}
.legend-item{display:flex;align-items:center;gap:6px;font-size:12px;font-weight:600;color:var(--text2)}
.legend-dot{width:12px;height:12px;border-radius:3px;flex-shrink:0}

/* Bars - Section 1 */
.bar-row{display:flex;align-items:center;gap:12px;margin-bottom:8px;padding:8px 12px;background:var(--bg2);border-radius:8px;border:1px solid var(--border);transition:all 0.3s;position:relative;overflow:hidden}
.bar-row:hover{border-color:rgba(255,59,92,0.2);background:var(--bg3)}
.bar-rank{font-size:11px;font-weight:700;color:var(--text3);width:24px;text-align:center;flex-shrink:0}
.bar-name{font-size:13px;font-weight:700;color:var(--text);width:130px;flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.bar-track{flex:1;height:32px;background:var(--bg);border-radius:4px;overflow:hidden;display:flex;position:relative}
.bar-seg{height:100%;transition:width 1.5s cubic-bezier(0.25,0.8,0.25,1);position:relative;display:flex;align-items:center;justify-content:center;width:0}
.bar-seg span{font-size:10px;font-weight:700;color:rgba(255,255,255,0.9);text-shadow:0 1px 2px rgba(0,0,0,0.5);white-space:nowrap;opacity:0;transition:opacity 0.3s}
.bar-row:hover .bar-seg span{opacity:1}
.bar-score{font-size:13px;font-weight:800;color:var(--red);width:56px;text-align:right;flex-shrink:0;font-family:'JetBrains Mono',monospace}

/* Threat meter bars - Section 2 */
.threat-row{margin-bottom:16px;padding:14px 16px;background:var(--bg2);border-radius:10px;border:1px solid var(--border);transition:all 0.3s}
.threat-row:hover{border-color:rgba(255,59,92,0.15)}
.threat-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.threat-name{font-size:14px;font-weight:700}
.threat-badge{font-size:10px;font-weight:800;padding:3px 10px;border-radius:20px;letter-spacing:0.5px;text-transform:uppercase}
.threat-meter{height:24px;background:var(--bg);border-radius:4px;overflow:hidden;position:relative}
.threat-fill{height:100%;border-radius:4px;transition:width 1.5s cubic-bezier(0.25,0.8,0.25,1);display:flex;align-items:center;padding-left:8px;width:0}
.threat-fill span{font-size:11px;font-weight:700;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,0.6)}
.threat-pills{display:flex;flex-wrap:wrap;gap:5px;margin-top:8px}
.pill{font-size:10px;font-weight:600;padding:2px 8px;border-radius:10px;background:rgba(255,255,255,0.05);color:var(--text2);border:1px solid rgba(255,255,255,0.08)}

/* Callout box */
.callout{margin:24px 0;padding:20px 24px;background:linear-gradient(135deg,rgba(255,59,92,0.06),rgba(168,85,247,0.04));border-left:3px solid var(--red);border-radius:0 8px 8px 0;font-size:13px;line-height:1.8;color:var(--text2)}
.callout strong{color:var(--text);font-weight:700}

/* Mini stacked bars - Sections 3/5 */
.mini-bar-row{display:flex;align-items:center;gap:12px;margin-bottom:6px;padding:10px 14px;background:var(--bg2);border-radius:8px;border:1px solid var(--border);transition:all 0.3s}
.mini-bar-row:hover{border-color:rgba(255,59,92,0.15)}
.mini-bar-name{font-size:13px;font-weight:700;width:130px;flex-shrink:0;color:var(--text)}
.mini-bar-track{flex:1;height:28px;background:var(--bg);border-radius:4px;overflow:hidden;display:flex}
.mini-bar-seg{height:100%;display:flex;align-items:center;justify-content:center;transition:width 1.5s cubic-bezier(0.25,0.8,0.25,1);width:0}
.mini-bar-seg span{font-size:9px;font-weight:700;color:rgba(255,255,255,0.9);text-shadow:0 1px 2px rgba(0,0,0,0.6)}
.mini-bar-total{font-size:12px;font-weight:700;color:var(--text2);width:48px;text-align:right;flex-shrink:0;font-family:'JetBrains Mono',monospace}

/* Matrix grid - Section 4 */
.matrix{overflow-x:auto;margin-top:16px}
.matrix table{width:100%;border-collapse:separate;border-spacing:3px;min-width:700px}
.matrix th{font-size:10px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:0.5px;padding:8px 6px;text-align:center;white-space:nowrap}
.matrix th:first-child{text-align:left;width:130px}
.matrix td{text-align:center;padding:8px 6px;border-radius:4px;font-size:12px;font-weight:700;font-family:'JetBrains Mono',monospace;transition:all 0.3s}
.matrix td:first-child{text-align:left;font-family:'Inter',sans-serif;font-size:13px;font-weight:700;color:var(--text);background:transparent !important}
.cell-0{background:rgba(255,255,255,0.02);color:var(--text3)}
.cell-low{background:rgba(255,59,92,0.08);color:var(--red)}
.cell-mid{background:rgba(255,59,92,0.18);color:#ff6b82}
.cell-high{background:rgba(255,59,92,0.35);color:#fff}
.cell-extreme{background:rgba(220,38,38,0.55);color:#fff;text-shadow:0 0 8px rgba(255,59,92,0.5)}

/* Intel bars - Section 6 */
.intel-row{display:flex;align-items:center;gap:12px;margin-bottom:6px;padding:8px 14px;background:var(--bg2);border-radius:8px;border:1px solid var(--border);transition:all 0.3s}
.intel-row:hover{border-color:rgba(168,85,247,0.2)}
.intel-name{font-size:13px;font-weight:700;width:130px;flex-shrink:0}
.intel-track{flex:1;height:22px;background:var(--bg);border-radius:4px;overflow:hidden}
.intel-fill{height:100%;background:linear-gradient(90deg,var(--purple),var(--blue));border-radius:4px;display:flex;align-items:center;padding-left:8px;transition:width 1.5s cubic-bezier(0.25,0.8,0.25,1);width:0}
.intel-fill span{font-size:10px;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,0.5)}
.intel-count{font-size:12px;font-weight:700;color:var(--text2);width:40px;text-align:right;flex-shrink:0;font-family:'JetBrains Mono',monospace}

/* Excerpt cards - Section 7 */
.excerpts-person{margin-bottom:32px}
.excerpts-person h3{font-size:16px;font-weight:800;margin-bottom:12px;color:var(--text);display:flex;align-items:center;gap:8px}
.excerpts-person h3 .score-tag{font-size:10px;font-weight:700;padding:2px 8px;border-radius:4px;background:rgba(255,59,92,0.15);color:var(--red)}
.excerpt-card{margin-bottom:8px;padding:14px 18px;background:linear-gradient(135deg,rgba(220,38,38,0.04),rgba(220,38,38,0.01));border:1px solid rgba(220,38,38,0.12);border-radius:8px;transition:all 0.3s}
.excerpt-card:hover{border-color:rgba(220,38,38,0.25);background:linear-gradient(135deg,rgba(220,38,38,0.07),rgba(220,38,38,0.02))}
.excerpt-meta{display:flex;align-items:center;gap:8px;margin-bottom:6px;flex-wrap:wrap}
.excerpt-doc{font-size:10px;font-weight:600;color:var(--text3);font-family:'JetBrains Mono',monospace}
.excerpt-sev{font-size:9px;font-weight:800;padding:1px 6px;border-radius:3px;text-transform:uppercase}
.excerpt-cat{font-size:9px;font-weight:700;padding:1px 6px;border-radius:3px;background:rgba(255,255,255,0.06);color:var(--text2)}
.excerpt-text{font-size:12px;color:var(--text2);line-height:1.7;font-style:italic;border-left:2px solid rgba(255,59,92,0.3);padding-left:12px;margin-top:4px}

/* Context box - Section 8 */
.context-box{padding:20px 24px;background:var(--bg2);border-radius:10px;border:1px solid var(--border)}
.context-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
@media(max-width:600px){.context-grid{grid-template-columns:1fr}}
.context-card{padding:16px;background:var(--bg3);border-radius:8px;border:1px solid var(--border)}
.context-card h4{font-size:14px;font-weight:700;margin-bottom:8px;color:var(--text)}
.context-card .score-big{font-size:28px;font-weight:900;color:var(--green);margin-bottom:4px}
.context-cats{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}
.context-cats .cat-item{font-size:10px;padding:2px 8px;border-radius:4px;background:rgba(255,255,255,0.03);color:var(--text3);border:1px solid rgba(255,255,255,0.05)}

/* Note */
.note{font-size:11px;color:var(--text3);padding:8px 12px;background:rgba(255,255,255,0.02);border-radius:6px;margin-top:12px;border-left:2px solid var(--gray)}

/* Footer */
.footer{margin-top:80px;padding:32px 0;border-top:1px solid var(--border);text-align:center;font-size:11px;color:var(--text3);line-height:1.8}

/* Nav dots */
.section-nav{position:fixed;right:16px;top:50%;transform:translateY(-50%);z-index:999;display:flex;flex-direction:column;gap:6px}
.section-nav a{width:8px;height:8px;border-radius:50%;background:var(--bg4);border:1px solid rgba(255,255,255,0.1);transition:all 0.3s;display:block}
.section-nav a:hover,.section-nav a.active{background:var(--red);border-color:var(--red);transform:scale(1.3)}
@media(max-width:768px){.section-nav{display:none}}

/* Highlight row */
.highlight-row{border-color:rgba(255,59,92,0.3) !important;background:rgba(255,59,92,0.03) !important}

/* Responsive */
@media(max-width:768px){
  .bar-name,.mini-bar-name,.threat-name,.intel-name{width:90px;font-size:11px}
  .container{padding:24px 12px 60px}
  .hero{padding:60px 0 40px}
}
</style>
</head>
<body>

<!-- Home button -->
<a href="index.html" style="position:fixed;top:12px;left:12px;z-index:99999;display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:rgba(15,17,23,0.85);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:#9aa0b0;text-decoration:none;font:600 13px Inter,-apple-system,sans-serif;transition:all 0.3s;" onmouseover="this.style.color='#ff3b5c';this.style.borderColor='rgba(255,59,92,0.3)'" onmouseout="this.style.color='#9aa0b0';this.style.borderColor='rgba(255,255,255,0.1)'">&larr; Home</a>

<!-- Section nav dots -->
<nav class="section-nav" id="sectionNav">
  <a href="#s1" title="Severity Ranking"></a>
  <a href="#s2" title="Blackmail Risk"></a>
  <a href="#s3" title="Criminal Conduct"></a>
  <a href="#s4" title="Direct Involvement"></a>
  <a href="#s5" title="Obstruction"></a>
  <a href="#s6" title="Intelligence"></a>
  <a href="#s7" title="Excerpts"></a>
  <a href="#s8" title="Context"></a>
</nav>

<div class="container">

<!-- HERO -->
<div class="hero">
  <h1>Epstein Files &mdash; Red Flag Deep Dive</h1>
  <p class="subtitle">17 categories of analysis across 75,000+ findings from 800,000+ FOIA documents. Four composite scores measure criminal conduct, blackmail vulnerability, direct involvement, and obstruction/cover-up.</p>
</div>

<!-- ============================================================ -->
<!-- SECTION 1: Overall Severity Ranking -->
<!-- ============================================================ -->
<div class="section" id="s1">
  <div class="section-header">
    <div class="section-num">Section 01</div>
    <h2>Overall Severity Ranking</h2>
    <p>Composite scores from 17 analytical categories. Bars show four sub-scores as stacked segments. Hover to see segment values.</p>
  </div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#dc2626"></div>Criminal Conduct</div>
    <div class="legend-item"><div class="legend-dot" style="background:#a855f7"></div>Blackmail Risk</div>
    <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div>Direct Involvement</div>
    <div class="legend-item"><div class="legend-dot" style="background:#60a5fa"></div>Obstruction / Cover-up</div>
  </div>

  <div id="severityBars"></div>

  <div class="note">Note: Ghislaine Maxwell (63,004) and Maxwell [combined references] (16,030) are excluded from all charts as core case figures &mdash; their scores dwarf all associates by orders of magnitude.</div>
</div>

<!-- ============================================================ -->
<!-- SECTION 2: Blackmail & Kompromat Risk -->
<!-- ============================================================ -->
<div class="section" id="s2">
  <div class="section-header">
    <div class="section-num">Section 02</div>
    <h2>Blackmail &amp; Kompromat Risk</h2>
    <p>Assessing vulnerability to compromising material based on documented mentions across categories. Tier thresholds: Extreme (200+), High (100-199), Elevated (50-99), Low (10-49), Negligible (&lt;10).</p>
  </div>

  <div id="blackmailBars"></div>

  <div class="callout">
    <strong>Dershowitz has the highest blackmail risk score (315)</strong> of any associate &mdash; driven by 28 explicit blackmail/kompromat mentions in court filings, plus 15 documented flight log appearances and high overlap with sexual assault and minors categories. <strong>Brunel (292)</strong>, <strong>Trump (290)</strong>, and <strong>Prince Andrew (244)</strong> follow.
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 3: Criminal Conduct Breakdown -->
<!-- ============================================================ -->
<div class="section" id="s3">
  <div class="section-header">
    <div class="section-num">Section 03</div>
    <h2>Criminal Conduct Breakdown</h2>
    <p>Top 10 associates by criminal conduct score, broken down into four primary criminal categories.</p>
  </div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#dc2626"></div>Rape / Sexual Assault</div>
    <div class="legend-item"><div class="legend-dot" style="background:#ff3b5c"></div>Minors / Underage</div>
    <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div>Trafficking</div>
    <div class="legend-item"><div class="legend-dot" style="background:#22c55e"></div>Recruitment / Grooming</div>
  </div>

  <div id="criminalBars"></div>
</div>

<!-- ============================================================ -->
<!-- SECTION 4: Direct Involvement Evidence -->
<!-- ============================================================ -->
<div class="section" id="s4">
  <div class="section-header">
    <div class="section-num">Section 04</div>
    <h2>Direct Involvement Evidence</h2>
    <p>Documented evidence types linking associates to Epstein's operations. Cells show mention counts, color-coded by intensity (darker = fewer, brighter = more).</p>
  </div>

  <div class="matrix" id="involvementMatrix"></div>
</div>

<!-- ============================================================ -->
<!-- SECTION 5: Obstruction & Cover-up -->
<!-- ============================================================ -->
<div class="section" id="s5">
  <div class="section-header">
    <div class="section-num">Section 05</div>
    <h2>Obstruction &amp; Cover-up</h2>
    <p>Who helped Epstein avoid justice? Four obstruction-related categories analyzed.</p>
  </div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#60a5fa"></div>Legal / Political Cover</div>
    <div class="legend-item"><div class="legend-dot" style="background:#a855f7"></div>Witness Tampering</div>
    <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div>Threats / Intimidation</div>
    <div class="legend-item"><div class="legend-dot" style="background:#dc2626"></div>Murder / Suspicious Death</div>
  </div>

  <div id="obstructionBars"></div>

  <div class="callout">
    <strong>Alexander Acosta scores highest in obstruction (666)</strong> &mdash; primarily from 209 mentions of legal/political cover reflecting his role in Epstein's controversial 2008 plea deal that granted immunity to co-conspirators. <strong>Trump scores 290 in obstruction</strong>, with 51 legal/political cover mentions and 119 financial entanglement references.
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 6: Intelligence Connections -->
<!-- ============================================================ -->
<div class="section" id="s6">
  <div class="section-header">
    <div class="section-num">Section 06</div>
    <h2>Intelligence Connections</h2>
    <p>Mentions near intelligence-related terms (Mossad, CIA, MI5/6, intelligence asset, etc.) per associate.</p>
  </div>

  <div id="intelBars"></div>

  <div class="callout">
    Multiple associates show significant intelligence-related mentions. <strong>Prince Andrew (161 mentions)</strong>, <strong>Trump (95)</strong>, and <strong>Acosta (82)</strong> appear most frequently near intelligence terms. <strong>Clinton (51)</strong>, <strong>Brunel (40)</strong>, and <strong>Dershowitz (39)</strong> also feature. <strong>Ehud Barak (25)</strong>, former Israeli PM, and <strong>Wexner (31)</strong> are notable given long-standing allegations of Mossad connections.
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 7: Most Damning Document Excerpts -->
<!-- ============================================================ -->
<div class="section" id="s7">
  <div class="section-header">
    <div class="section-num">Section 07</div>
    <h2>Most Damning Document Excerpts</h2>
    <p>Selected high-severity excerpts from FOIA documents for the top 6 associates, prioritizing sexual assault, minors, trafficking, blackmail, and victim testimony categories.</p>
  </div>

  <div id="excerptCards"></div>
</div>

<!-- ============================================================ -->
<!-- SECTION 8: Obama & Biden — For Context -->
<!-- ============================================================ -->
<div class="section" id="s8">
  <div class="section-header">
    <div class="section-num">Section 08</div>
    <h2>Obama &amp; Biden &mdash; For Context</h2>
    <p>Demonstrating that the scoring system properly identifies people with no meaningful connection to Epstein's criminal activities. These near-zero scores validate the methodology.</p>
  </div>

  <div class="context-box">
    <p style="font-size:13px;color:var(--text2);margin-bottom:8px">These low scores validate the methodology. Names appear in documents primarily due to political context, news coverage overlap, or tangential references &mdash; not due to criminal linkage.</p>
    <div class="context-grid">
      <div class="context-card">
        <h4>Barack Obama</h4>
        <div class="score-big">11</div>
        <div style="font-size:11px;color:var(--text3)">Overall Severity &mdash; 517 raw mentions in corpus</div>
        <div style="margin-top:10px;font-size:12px;color:var(--text2)">
          Criminal: <strong>6</strong> &bull; Blackmail: <strong>2</strong> &bull; Involvement: <strong>0</strong> &bull; Obstruction: <strong>3</strong>
        </div>
        <div class="context-cats">
          <span class="cat-item">1 minors</span>
          <span class="cat-item">1 trafficking</span>
          <span class="cat-item">1 murder/death</span>
          <span class="cat-item">2 intelligence</span>
          <span class="cat-item">0 blackmail</span>
          <span class="cat-item">0 flight logs</span>
          <span class="cat-item">0 victim named</span>
          <span class="cat-item">0 surveillance</span>
          <span class="cat-item">0 rape/SA</span>
        </div>
      </div>
      <div class="context-card">
        <h4>Joe Biden</h4>
        <div class="score-big">7</div>
        <div style="font-size:11px;color:var(--text3)">Overall Severity &mdash; 496 raw mentions in corpus</div>
        <div style="margin-top:10px;font-size:12px;color:var(--text2)">
          Criminal: <strong>3</strong> &bull; Blackmail: <strong>0</strong> &bull; Involvement: <strong>4</strong> &bull; Obstruction: <strong>0</strong>
        </div>
        <div class="context-cats">
          <span class="cat-item">1 recruitment</span>
          <span class="cat-item">2 financial</span>
          <span class="cat-item">3 intelligence</span>
          <span class="cat-item">0 rape/SA</span>
          <span class="cat-item">0 minors</span>
          <span class="cat-item">0 trafficking</span>
          <span class="cat-item">0 blackmail</span>
          <span class="cat-item">0 flight logs</span>
          <span class="cat-item">0 victim named</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<div class="footer">
  Data: 75,000+ findings from 800,000+ FOIA documents released under the Epstein Files Transparency Act | 17 analytical categories | 4 composite severity scores | Maxwell (63,004) and Ghislaine (16,030) excluded from charts as core case figures
</div>

</div><!-- /.container -->

<script>
// ============================================================
// DATA
// ============================================================
const people = [
  { name:"Acosta", overall:1357, crim:449, blkml:210, invlv:32, obstr:666,
    cats:{rape:20,minors:84,trafficking:33,grooming:6,blackmail:0,surveillance:0,murder:7,threats:2,witness:2,victim_named:0,flight:2,locations:0,black_book:1,legal_cover:209,financial:11,intel:82} },
  { name:"Trump", overall:1291, crim:588, blkml:290, invlv:123, obstr:290,
    cats:{rape:36,minors:95,trafficking:44,grooming:9,blackmail:1,surveillance:0,murder:40,threats:3,witness:1,victim_named:0,flight:23,locations:0,black_book:9,legal_cover:51,financial:119,intel:95} },
  { name:"Prince Andrew", overall:1239, crim:710, blkml:244, invlv:174, obstr:111,
    cats:{rape:38,minors:81,trafficking:69,grooming:36,blackmail:0,surveillance:0,murder:6,threats:3,witness:9,victim_named:0,flight:6,locations:0,black_book:6,legal_cover:12,financial:9,intel:161} },
  { name:"Brunel", overall:1214, crim:686, blkml:292, invlv:185, obstr:51,
    cats:{rape:50,minors:93,trafficking:37,grooming:32,blackmail:0,surveillance:0,murder:5,threats:6,witness:0,victim_named:7,flight:6,locations:0,black_book:2,legal_cover:4,financial:8,intel:40} },
  { name:"Dershowitz", overall:882, crim:410, blkml:315, invlv:73, obstr:84,
    cats:{rape:26,minors:54,trafficking:42,grooming:6,blackmail:28,surveillance:0,murder:4,threats:3,witness:0,victim_named:0,flight:15,locations:0,black_book:2,legal_cover:20,financial:13,intel:39} },
  { name:"Clinton", overall:659, crim:341, blkml:195, invlv:70, obstr:53,
    cats:{rape:20,minors:68,trafficking:15,grooming:4,blackmail:1,surveillance:0,murder:8,threats:0,witness:1,victim_named:0,flight:14,locations:0,black_book:6,legal_cover:8,financial:1,intel:51} },
  { name:"Sarah Kellen", overall:602, crim:326, blkml:129, invlv:103, obstr:44,
    cats:{rape:20,minors:44,trafficking:13,grooming:25,blackmail:0,surveillance:0,murder:0,threats:4,witness:2,victim_named:0,flight:1,locations:0,black_book:0,legal_cover:6,financial:2,intel:19} },
  { name:"Wexner", overall:247, crim:132, blkml:73, invlv:24, obstr:18,
    cats:{rape:6,minors:28,trafficking:4,grooming:4,blackmail:1,surveillance:0,murder:1,threats:3,witness:0,victim_named:0,flight:0,locations:0,black_book:4,legal_cover:1,financial:0,intel:31} },
  { name:"Jes Staley", overall:179, crim:70, blkml:81, invlv:10, obstr:18,
    cats:{rape:1,minors:17,trafficking:5,grooming:0,blackmail:9,surveillance:0,murder:6,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:5,legal_cover:0,financial:0,intel:17} },
  { name:"Bill Richardson", overall:159, crim:76, blkml:50, invlv:24, obstr:9,
    cats:{rape:1,minors:23,trafficking:0,grooming:1,blackmail:0,surveillance:0,murder:3,threats:0,witness:0,victim_named:0,flight:2,locations:0,black_book:7,legal_cover:0,financial:49,intel:8} },
  { name:"Gates", overall:136, crim:50, blkml:26, invlv:24, obstr:36,
    cats:{rape:2,minors:9,trafficking:3,grooming:2,blackmail:0,surveillance:0,murder:0,threats:0,witness:6,victim_named:0,flight:4,locations:0,black_book:2,legal_cover:2,financial:2,intel:16} },
  { name:"Leon Black", overall:104, crim:26, blkml:64, invlv:14, obstr:0,
    cats:{rape:2,minors:5,trafficking:1,grooming:0,blackmail:10,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:7,legal_cover:0,financial:29,intel:18} },
  { name:"Spacey", overall:55, crim:28, blkml:15, invlv:9, obstr:3,
    cats:{rape:1,minors:6,trafficking:1,grooming:1,blackmail:0,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:1,locations:0,black_book:1,legal_cover:1,financial:0,intel:6} },
  { name:"George Mitchell", overall:51, crim:23, blkml:12, invlv:16, obstr:0,
    cats:{rape:2,minors:4,trafficking:0,grooming:1,blackmail:0,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:6,legal_cover:0,financial:0,intel:7} },
  { name:"Woody Allen", overall:50, crim:28, blkml:16, invlv:6, obstr:0,
    cats:{rape:1,minors:7,trafficking:0,grooming:1,blackmail:0,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:1,legal_cover:0,financial:0,intel:3} },
  { name:"Kushner", overall:40, crim:12, blkml:0, invlv:0, obstr:28,
    cats:{rape:0,minors:0,trafficking:4,grooming:0,blackmail:0,surveillance:0,murder:0,threats:7,witness:0,victim_named:0,flight:0,locations:0,black_book:0,legal_cover:0,financial:97,intel:6} },
  { name:"Ehud Barak", overall:34, crim:15, blkml:13, invlv:6, obstr:0,
    cats:{rape:0,minors:3,trafficking:2,grooming:0,blackmail:1,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:2,locations:0,black_book:0,legal_cover:0,financial:0,intel:25} },
  { name:"Obama", overall:11, crim:6, blkml:2, invlv:0, obstr:3,
    cats:{rape:0,minors:1,trafficking:1,grooming:0,blackmail:0,surveillance:0,murder:1,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:0,legal_cover:0,financial:0,intel:2} },
  { name:"Biden", overall:7, crim:3, blkml:0, invlv:4, obstr:0,
    cats:{rape:0,minors:0,trafficking:0,grooming:1,blackmail:0,surveillance:0,murder:0,threats:0,witness:0,victim_named:0,flight:0,locations:0,black_book:0,legal_cover:0,financial:2,intel:3} }
];

const maxOverall = 1357;

// ============================================================
// SECTION 1: Overall Severity Ranking
// ============================================================
(function(){
  const el = document.getElementById('severityBars');
  let html = '';
  const filtered = people.filter(p => p.overall >= 10);
  filtered.forEach((p, i) => {
    const pctCrim = (p.crim / maxOverall * 100);
    const pctBlk = (p.blkml / maxOverall * 100);
    const pctInv = (p.invlv / maxOverall * 100);
    const pctObs = (p.obstr / maxOverall * 100);
    html += '<div class="bar-row">' +
      '<div class="bar-rank">' + (i + 1) + '</div>' +
      '<div class="bar-name">' + p.name + '</div>' +
      '<div class="bar-track">' +
        '<div class="bar-seg" style="background:#dc2626" data-w="' + pctCrim + '"><span>' + p.crim + '</span></div>' +
        '<div class="bar-seg" style="background:#a855f7" data-w="' + pctBlk + '"><span>' + p.blkml + '</span></div>' +
        '<div class="bar-seg" style="background:#f59e0b" data-w="' + pctInv + '"><span>' + p.invlv + '</span></div>' +
        '<div class="bar-seg" style="background:#60a5fa" data-w="' + pctObs + '"><span>' + p.obstr + '</span></div>' +
      '</div>' +
      '<div class="bar-score">' + p.overall.toLocaleString() + '</div>' +
    '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// SECTION 2: Blackmail & Kompromat Risk
// ============================================================
(function(){
  const el = document.getElementById('blackmailBars');
  const sorted = people.filter(p => p.blkml > 0).sort((a, b) => b.blkml - a.blkml);
  const maxBlk = sorted[0].blkml;
  let html = '';
  sorted.forEach(function(p) {
    var tier, tierColor, tierBg;
    if (p.blkml >= 200) { tier = 'Extreme Risk'; tierColor = '#dc2626'; tierBg = 'rgba(220,38,38,0.15)'; }
    else if (p.blkml >= 100) { tier = 'High Risk'; tierColor = '#ff3b5c'; tierBg = 'rgba(255,59,92,0.12)'; }
    else if (p.blkml >= 50) { tier = 'Elevated'; tierColor = '#f59e0b'; tierBg = 'rgba(245,158,11,0.12)'; }
    else if (p.blkml >= 10) { tier = 'Low'; tierColor = '#60a5fa'; tierBg = 'rgba(96,165,250,0.12)'; }
    else { tier = 'Negligible'; tierColor = '#4b5563'; tierBg = 'rgba(75,85,99,0.12)'; }

    var pct = (p.blkml / maxBlk * 100);
    var c = p.cats;
    var pills = '';
    var pillData = [
      {v:c.blackmail, l:'blackmail'}, {v:c.flight, l:'flight logs'}, {v:c.surveillance, l:'surveillance'},
      {v:c.rape, l:'rape/SA'}, {v:c.minors, l:'minors'}, {v:c.trafficking, l:'trafficking'},
      {v:c.grooming, l:'grooming'}, {v:c.victim_named, l:'victim named'}, {v:c.black_book, l:'black book'},
      {v:c.murder, l:'murder/death'}, {v:c.financial, l:'financial'}, {v:c.intel, l:'intelligence'}
    ];
    pillData.forEach(function(pd) {
      if (pd.v > 0) pills += '<span class="pill">' + pd.v + ' ' + pd.l + '</span>';
    });

    html += '<div class="threat-row">' +
      '<div class="threat-top">' +
        '<div class="threat-name" style="color:' + tierColor + '">' + p.name + '</div>' +
        '<div class="threat-badge" style="color:' + tierColor + ';background:' + tierBg + '">' + tier + ' &mdash; ' + p.blkml + '</div>' +
      '</div>' +
      '<div class="threat-meter">' +
        '<div class="threat-fill" style="background:linear-gradient(90deg,' + tierColor + ',' + tierColor + '88)" data-w="' + pct + '"><span>' + p.blkml + '</span></div>' +
      '</div>' +
      '<div class="threat-pills">' + pills + '</div>' +
    '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// SECTION 3: Criminal Conduct Breakdown
// ============================================================
(function(){
  const el = document.getElementById('criminalBars');
  const top10 = people.slice().sort(function(a, b) { return b.crim - a.crim; }).slice(0, 10);
  var realMax = 0;
  top10.forEach(function(p) {
    var s = p.cats.rape + p.cats.minors + p.cats.trafficking + p.cats.grooming;
    if (s > realMax) realMax = s;
  });

  let html = '';
  top10.forEach(function(p) {
    var c = p.cats;
    var total = c.rape + c.minors + c.trafficking + c.grooming;
    var pR = (c.rape / realMax * 100);
    var pM = (c.minors / realMax * 100);
    var pT = (c.trafficking / realMax * 100);
    var pG = (c.grooming / realMax * 100);
    html += '<div class="mini-bar-row">' +
      '<div class="mini-bar-name">' + p.name + '</div>' +
      '<div class="mini-bar-track">' +
        '<div class="mini-bar-seg" style="background:#dc2626" data-w="' + pR + '"><span>' + (c.rape > 3 ? c.rape : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#ff3b5c" data-w="' + pM + '"><span>' + (c.minors > 3 ? c.minors : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#f59e0b" data-w="' + pT + '"><span>' + (c.trafficking > 3 ? c.trafficking : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#22c55e" data-w="' + pG + '"><span>' + (c.grooming > 3 ? c.grooming : '') + '</span></div>' +
      '</div>' +
      '<div class="mini-bar-total">' + total + '</div>' +
    '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// SECTION 4: Direct Involvement Evidence Matrix
// ============================================================
(function(){
  const el = document.getElementById('involvementMatrix');
  const top12 = people.slice().sort(function(a, b) { return b.invlv - a.invlv; }).slice(0, 12);
  const cols = [
    {key:'victim_named', label:'Victim Named'},
    {key:'flight', label:'Flight Logs'},
    {key:'locations', label:'At Locations'},
    {key:'black_book', label:'Black Book'},
    {key:'grooming', label:'Recruitment'}
  ];
  function cellClass(v) {
    if (v === 0) return 'cell-0';
    if (v <= 2) return 'cell-low';
    if (v <= 8) return 'cell-mid';
    if (v <= 20) return 'cell-high';
    return 'cell-extreme';
  }
  let html = '<table><thead><tr><th></th>';
  cols.forEach(function(c) { html += '<th>' + c.label + '</th>'; });
  html += '</tr></thead><tbody>';
  top12.forEach(function(p) {
    html += '<tr><td>' + p.name + '</td>';
    cols.forEach(function(c) {
      var v = p.cats[c.key];
      html += '<td class="' + cellClass(v) + '">' + v + '</td>';
    });
    html += '</tr>';
  });
  html += '</tbody></table>';
  el.innerHTML = html;
})();

// ============================================================
// SECTION 5: Obstruction & Cover-up
// ============================================================
(function(){
  const el = document.getElementById('obstructionBars');
  const sorted = people.filter(function(p) { return p.obstr > 0; }).sort(function(a, b) { return b.obstr - a.obstr; });
  var realMax = 0;
  sorted.forEach(function(p) {
    var s = p.cats.legal_cover + p.cats.witness + p.cats.threats + p.cats.murder;
    if (s > realMax) realMax = s;
  });

  let html = '';
  sorted.forEach(function(p) {
    var c = p.cats;
    var total = c.legal_cover + c.witness + c.threats + c.murder;
    if (total === 0) return;
    var pL = (c.legal_cover / realMax * 100);
    var pW = (c.witness / realMax * 100);
    var pT = (c.threats / realMax * 100);
    var pM = (c.murder / realMax * 100);
    var extraClass = (p.name === 'Acosta') ? ' highlight-row' : '';
    html += '<div class="mini-bar-row' + extraClass + '">' +
      '<div class="mini-bar-name">' + p.name + '</div>' +
      '<div class="mini-bar-track">' +
        '<div class="mini-bar-seg" style="background:#60a5fa" data-w="' + pL + '"><span>' + (c.legal_cover > 2 ? c.legal_cover : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#a855f7" data-w="' + pW + '"><span>' + (c.witness > 2 ? c.witness : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#f59e0b" data-w="' + pT + '"><span>' + (c.threats > 2 ? c.threats : '') + '</span></div>' +
        '<div class="mini-bar-seg" style="background:#dc2626" data-w="' + pM + '"><span>' + (c.murder > 2 ? c.murder : '') + '</span></div>' +
      '</div>' +
      '<div class="mini-bar-total">' + total + '</div>' +
    '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// SECTION 6: Intelligence Connections
// ============================================================
(function(){
  const el = document.getElementById('intelBars');
  const sorted = people.filter(function(p) { return p.cats.intel > 0; }).sort(function(a, b) { return b.cats.intel - a.cats.intel; });
  const maxIntel = sorted[0].cats.intel;
  let html = '';
  sorted.forEach(function(p) {
    var pct = (p.cats.intel / maxIntel * 100);
    html += '<div class="intel-row">' +
      '<div class="intel-name">' + p.name + '</div>' +
      '<div class="intel-track">' +
        '<div class="intel-fill" data-w="' + pct + '"><span>' + p.cats.intel + '</span></div>' +
      '</div>' +
      '<div class="intel-count">' + p.cats.intel + '</div>' +
    '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// SECTION 7: Excerpts
// ============================================================
(function(){
  const el = document.getElementById('excerptCards');

  const excerpts = {
    "Trump": [
      { doc:"EFTA00069870", page:"10", sev:15, cat:"Minors / Underage",
        text:"Barr has said that the criminal investigation into any possible co-conspirators of Epstein would continue. Earlier this month, French gender equality minister Marlene Schiappa had called on authorities to investigate Epstein\u2019s links to France..." },
      { doc:"EFTA00032348", page:"1", sev:15, cat:"Trafficking",
        text:"Federal investigators will examine the death of Jeffrey Epstein, the financier charged with sex trafficking underage girls, after officials said he was found dead in his Manhattan federal jail cell on Saturday..." },
      { doc:"EFTA00086370", page:"2", sev:6, cat:"Blackmail / Kompromat",
        text:"Besides your (superb) defense work for Epstein and all enjoyers (Clinton, Barak, Wexner, Maxwell, Andrew, Trump, Dersh, etc) of his hospitality, did you have any operational role in the enterprise?" },
      { doc:"EFTA00018174", page:"1", sev:12, cat:"Rape / Sexual Assault",
        text:"\u201CThe Palm Beach state attorney\u2019s office was ready to let Epstein walk free,\u201D Acosta said in his calm, sort of toneless voice. \u201COur prosecutors ... presented the ultimatum.\u201D Which was that Epstein, who was facing far more serious charges..." }
    ],
    "Prince Andrew": [
      { doc:"EFTA00084366", page:"15", sev:15, cat:"Minors / Underage",
        text:"Ghislaine Maxwell felt no guilt in procuring girls for Jeffrey Epstein to satisfy his \u2018incredible sex drive,\u2019 Prince Andrew\u2019s distant cousin has claimed \u2014 adding that \u2018if anything, she was proud.\u2019" },
      { doc:"EFTA00024034", page:"1", sev:14, cat:"Rape / Sexual Assault",
        text:"Jeffrey Epstein is a billionaire financier, philanthropist, and sex offender. In 2005, Epstein became the subject of an undercover sex trafficking investigation by Palm Beach, Florida police..." },
      { doc:"EFTA00084366", page:"45", sev:14, cat:"Recruitment / Grooming",
        text:"Maxwell, who is a long-time friend of Prince Andrew and who saw him most recently in June 2019, was arrested at a luxury home in New Hampshire. She applied for release on \u00a34 million bail, arguing that her life is in danger..." },
      { doc:"EFTA00021556", page:"4", sev:16, cat:"Blackmail / Kompromat",
        text:"...business, personal, political, and financial gain, as well as to obtain potential blackmail information. One such powerful individual that Epstein forced then-minor Jane Doe #3 to have sexual relations with was former..." }
    ],
    "Dershowitz": [
      { doc:"EFTA00021556", page:"4", sev:16, cat:"Blackmail / Kompromat",
        text:"...business, personal, political, and financial gain, as well as to obtain potential blackmail information. One such powerful individual that Epstein forced then-minor Jane Doe #3 to have sexual relations with was former Harvard Law Professor Alan Dershowitz..." },
      { doc:"EFTA00021556", page:"4", sev:16, cat:"Minors / Underage",
        text:"...to obtain potential blackmail information. One such powerful individual that Epstein forced then-minor Jane Doe #3 to have sexual relations with was former Harvard Law Professor Alan Dershowitz..." },
      { doc:"EFTA00081180", page:"29", sev:9, cat:"Rape / Sexual Assault",
        text:"...during the years 2002\u20132005 Alan Dershowitz was on Epstein\u2019s plane on several occasions according to the flight logs produced by Epstein\u2019s pilot and information suggested that sexual assaults may have taken place on the plane..." },
      { doc:"EFTA00022133", page:"1", sev:10, cat:"Trafficking",
        text:"Epstein\u2019s sex trafficking scheme. In June 2019, only two months before his death, Epstein sent an e-mail asking her to send him nude photographs. Recruited by a woman named Rena in the fall of 2002..." }
    ],
    "Clinton": [
      { doc:"EFTA00076133", page:"2", sev:17, cat:"Rape / Sexual Assault",
        text:"Bill Clinton is in jeopardy of serious lawsuits, possible civil and even criminal charges by his association and claims of sexual abuse of underage girls on many occasions. I have copies of hundreds of photographs..." },
      { doc:"EFTA00076133", page:"2", sev:17, cat:"Minors / Underage",
        text:"Bill Clinton is in jeopardy of serious lawsuits, possible civil and even criminal charges by his association and claims of sexual abuse of underage girls on many occasions..." },
      { doc:"EFTA00024034", page:"1", sev:14, cat:"Trafficking",
        text:"The Enquirer seeks all documents relating to the FBI\u2019s investigation and prosecution of financier Jeffrey Edward Epstein, who pled guilty to one count of felony solicitation of prostitution in August 2008..." },
      { doc:"EFTA00086370", page:"2", sev:6, cat:"Blackmail / Kompromat",
        text:"Besides your (superb) defense work for Epstein and all enjoyers (Clinton, Barak, Wexner, Maxwell, Andrew, Trump, Dersh, etc) of his hospitality, did you have any operational role in the enterprise?" }
    ],
    "Brunel": [
      { doc:"EFTA00021558", page:"6", sev:14, cat:"Rape / Sexual Assault",
        text:"...young as twelve) to the United States for sexual purposes and farm them out to his friends, especially Epstein. Brunel would bring girls as young as twelve from countries such as France..." },
      { doc:"EFTA00021558", page:"6", sev:14, cat:"Minors / Underage",
        text:"Brunel would bring girls (some as young as twelve) to the United States for sexual purposes and farm them out to his friends, especially Epstein..." },
      { doc:"EFTA00078198", page:"7", sev:10, cat:"Victim Named Them",
        text:"While media stories have stated that Epstein and Maxwell\u2019s victims were mostly teenagers, there is evidence that suggests that they also abused younger girls. Jean-Luc Brunel..." },
      { doc:"EFTA00436099", page:"3", sev:10, cat:"Trafficking",
        text:"Federal investigators continue to investigate Epstein\u2019s activities, to see whether there is evidence of child trafficking \u2014 a far more serious charge than the two in his non-prosecution agreement..." }
    ],
    "Acosta": [
      { doc:"EFTA00091417", page:"1", sev:13, cat:"Minors / Underage",
        text:"When Krischer, then Palm Beach state attorney, found out the target was Epstein, a big Democratic donor, he refused to prosecute. It was only because of Krischer\u2019s active obstruction of the case that..." },
      { doc:"EFTA00029470", page:"1", sev:10, cat:"Trafficking",
        text:"The U.S. Department of Justice is reviewing a deal that a Trump administration official cut as a federal prosecutor, and the case has added fuel to a bid to expand crime victims\u2019 rights..." },
      { doc:"EFTA00018449", page:"1", sev:7, cat:"Recruitment / Grooming",
        text:"The girls were paid additional money if they would recruit others girls, police and court records allege. Epstein had assistants schedule as many as three visits a day. Rather than face federal charges..." },
      { doc:"EFTA00040358", page:"21", sev:8, cat:"Legal / Political Cover",
        text:"The investigation revealed that Epstein had engaged in similar behavior with multiple underage girls and had organized a sex ring where minor girls allegedly were \u2018lent\u2019 to other individuals..." }
    ]
  };

  function sevBadge(sev) {
    var color = '#4b5563', bg = 'rgba(75,85,99,0.15)';
    if (sev >= 15) { color = '#dc2626'; bg = 'rgba(220,38,38,0.2)'; }
    else if (sev >= 10) { color = '#ff3b5c'; bg = 'rgba(255,59,92,0.15)'; }
    else if (sev >= 7) { color = '#f59e0b'; bg = 'rgba(245,158,11,0.12)'; }
    return '<span class="excerpt-sev" style="color:' + color + ';background:' + bg + '">Sev ' + sev + '</span>';
  }

  var html = '';
  var personScores = { "Trump": 1291, "Prince Andrew": 1239, "Dershowitz": 882, "Clinton": 659, "Brunel": 1214, "Acosta": 1357 };
  var order = ["Trump", "Prince Andrew", "Dershowitz", "Clinton", "Brunel", "Acosta"];

  order.forEach(function(name) {
    var exs = excerpts[name];
    if (!exs) return;
    html += '<div class="excerpts-person">' +
      '<h3>' + name + ' <span class="score-tag">Overall: ' + personScores[name].toLocaleString() + '</span></h3>';
    exs.forEach(function(ex) {
      html += '<div class="excerpt-card">' +
        '<div class="excerpt-meta">' +
          '<span class="excerpt-doc">[' + ex.doc + ' p' + ex.page + ']</span>' +
          sevBadge(ex.sev) +
          '<span class="excerpt-cat">' + ex.cat + '</span>' +
        '</div>' +
        '<div class="excerpt-text">\u201C' + ex.text + '\u201D</div>' +
      '</div>';
    });
    html += '</div>';
  });
  el.innerHTML = html;
})();

// ============================================================
// Intersection Observer - animate bars on scroll + staggered entry
// ============================================================
(function(){
  // Animate sections into view
  var sectionObserver = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        // Animate bars inside this section after a short delay
        setTimeout(function() {
          var bars = entry.target.querySelectorAll('.bar-seg, .threat-fill, .mini-bar-seg, .intel-fill');
          bars.forEach(function(bar, i) {
            setTimeout(function() {
              var w = bar.getAttribute('data-w');
              if (w) bar.style.width = w + '%';
            }, i * 30);
          });
        }, 200);

        // Update nav dots
        var id = entry.target.id;
        if (id) {
          document.querySelectorAll('.section-nav a').forEach(function(a) {
            if (a.getAttribute('href') === '#' + id) {
              a.classList.add('active');
            } else {
              a.classList.remove('active');
            }
          });
        }
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.section').forEach(function(s) {
    sectionObserver.observe(s);
  });
})();
</script>
</body>
</html>
